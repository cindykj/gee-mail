<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>gee.mail</title>

<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet" media="screen">
		<script src="js/mail-generator.js"></script>

    <script>
     window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

    // Display the data from mail-generator.js

		for (var i = 0; i<window.geemails.length; i++){
			// console.log(window.geemails[i]);
			// console.log(window.geemails[i].sender);
			// console.log(window.geemails[i].subject);
			// console.log(window.geemails[i].date);
			// console.log(window.geemails[i].body);

			var emailBox = document.createElement('div');
			emailBox.className = 'emlContainer';
			document.body.appendChild(emailBox);

	        var senderBox = document.createElement('div');
	        senderBox.className = 'emlSender';
	        senderBox.innerHTML = geemails[i].sender;
	        // senderBox.style.backgroundColor = lightgrey;
	        senderBox.style.fontWeight = 'bold';
	      	emailBox.appendChild(senderBox);

	        var subjectBox = document.createElement('div');
	        subjectBox.className = 'emlSubject';
	        subjectBox.innerHTML = geemails[i].subject;
	        emailBox.appendChild(subjectBox);

	        var dateBox = document.createElement('div');
	        dateBox.className = 'emlDate';
	        dateBox.innerHTML = geemails[i].date;
	        emailBox.appendChild(dateBox);

	        var bodyBox = document.createElement('div');
	        bodyBox.className = 'emlBody';
	        bodyBox.innerHTML = geemails[i].body;
	        bodyBox.style.display = 'none';
	        emailBox.appendChild(bodyBox);
		}

	// Inbox counter

		// console.log(window.geemails.length);
		// console.log(window.geemails[0]);

		function aNewMessage(){
			// console.log('is it working?');
			var inboxCounter = document.getElementById('counter');
			inboxCounter.innerHTML = 'Inbox' + ' (' + window.geemails.length++ + ')';
		}

	// Generate new email

		function createNewMessage(){

			var compileMessage  = getNewMessage();

			var newEmailBox = document.createElement('div');
			newEmailBox.className = 'emlContainer';
			document.body.appendChild(newEmailBox);

			var newSender = document.createElement('div');
			newSender.className = 'emlSender';
			newSender.innerHTML = compileMessage.sender;
			newEmailBox.appendChild(newSender);

			var newSubject = document.createElement('div');
			newSubject.className = 'emlSubject';
			newSubject.innerHTML = compileMessage.subject;
			newEmailBox.appendChild(newSubject);

			var newDate = document.createElement('div');
			newDate.className = 'emlDate';
			newDate.innerHTML = compileMessage.date;
			newEmailBox.appendChild(newDate);

			var newBody = document.createElement('div');
			newBody.className = 'emlBody';
			newBody.innerHTML = compileMessage.body;
			newBody.style.display = 'none';
			newEmailBox.appendChild(newBody);
		
			console.log(getNewMessage());

	//Click to show Body
			var parentBox = document.getElementsByClassName('emlContainer');
			for (var i = 0; i<parentBox.length; i++){
				parentBox[i].addEventListener('click', showBody);
			}

			function showBody(){
				var bodyContent = this.querySelectorAll('.emlBody')[0];
				if (bodyContent.style.display === 'none'){
					bodyContent.style.display = 'block';
				}else{
					bodyContent.style.display = 'none';
				}
				// console.log('it works!');
			}

		
		// Unread emails are BOLDED; when clicked to display body, then the font returns to normal.

			// var readEmail = document.getElementsByClassName('emlContainer');
			// for (var i = 0; i<readEmail.length; i++){
			// 	readEmail [i].addEventListener('click', unBold);
			// }

			// function unBold(){
			// 	var subjectRead = this.querySelectorAll('.emlContainer')[0];
			// 	if (readEmail.style.fontWeight === 'bold'){
			// 		readEmail.style.fontWeight = 'normal';
			// 	}else{
			// 		readEmail.style.fontWeight = 'bold';
			// 	}
			// }

		}

		setInterval(aNewMessage, 3000);
		setInterval(createNewMessage, 3000);

 	};
 
    </script>
	</head>
	<body>
		<header id="intro">
			<img id="logo" src="https://images.sftcdn.net/images/t_optimized,f_auto/p/4726ff4a-9b33-11e6-b705-00163ed833e7/1323208810/geemail-logo.png" alt="logo">
			<h1 id="name">gee.mail</h1>
			<div id="welcome">Hi, DevLeague Team!</div>
			</h1>
		</header>	
		<nav id="content">
			<ul>
				<li id="counter">Inbox</li>
				<li id="compose">Compose</li>
				<li id="sent">Sent</li>
				<li id="drafts">Drafts</li>
			</ul>
		</nav>

		<div class="container" id="main">

		</div>

		 <script src="js/mail-generator.js"></script>
	</body>
</html>