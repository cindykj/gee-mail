<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>gee.mail</title>

<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet" media="screen">
		<script src="js/mail-generator.js"></script>

    <script>
     window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

    // Display the data from mail-generator.js

		for (var i = 0; i<window.geemails.length; i++){
			// console.log(window.geemails[i]);
			// console.log(window.geemails[i].sender);
			// console.log(window.geemails[i].subject);
			// console.log(window.geemails[i].date);
			// console.log(window.geemails[i].body);

			var emailBox = document.createElement('div');
			emailBox.className = 'emlContainer';
			document.body.appendChild(emailBox);

	        var senderBox = document.createElement('div');
	        senderBox.className = 'emlSender';
	        senderBox.innerHTML = geemails[i].sender;
	        // senderBox.style.backgroundColor = lightgrey;
	        senderBox.style.fontWeight = 'bold';
	      	emailBox.appendChild(senderBox);

	        var subjectBox = document.createElement('div');
	        subjectBox.className = 'emlSubject';
	        subjectBox.innerHTML = geemails[i].subject;
	        emailBox.appendChild(subjectBox);

	        var dateBox = document.createElement('div');
	        dateBox.className = 'emlDate';
	        dateBox.innerHTML = geemails[i].date;
	        emailBox.appendChild(dateBox);

	        var bodyBox = document.createElement('div');
	        bodyBox.className = 'emlBody';
	        bodyBox.innerHTML = geemails[i].body;
	        bodyBox.style.display = 'none';
	        emailBox.appendChild(bodyBox);
		}

	// Click emlSender to show Body

		// var parentBox = document.getElementsByClassName('emlSender');
		// for (var i = 0; i<parentBox.length; i++){
		// 	parentBox[i].addEventListener('click', showBody);
		// }

		// function showBody(){
		// 	var bodyContent = this.querySelectorAll('.emlBody')[0];
		// 	if (bodyContent.style.display === 'none'){
		// 		bodyContent.style.display = 'block';
		// 	}else{
		// 		bodyContent.style.display = 'none';
		// 	}
		// 	// console.log('it works!');
		// }

	// CSS experiments - MouseOver

		// var mouseIn = document.getElementsByClassName('emlSender');
		// var mouseOff = document.getElementsByClassName('emlSender');

		// for (var i = 0; i<mouseIn.length; i++){
		// 	mouseIn[i].addEventListener('mouseover', mouseOver);
		// }

		// for (var i = 0; i<mouseIn.length; i++){
		// 	mouseIn[i].addEventListener('mouseout', mousOut);

		// function mouseOver(){
		// 	var hoverColor = this.querySelectorAll('emlSender').style.backgroundColor = 'none';
		// }

		// function mouseOut(){
		// 	var hoverColor2 = this.querySelectorAll('emlSender').style.backgroundColor = 'lightgrey';
		// }

		//Example mouseOver

			// document.getElementById("demo").addEventListener("mouseover", mouseOver);
			// document.getElementById("demo").addEventListener("mouseout", mouseOut);

			// function mouseOver() {
			//     document.getElementById("demo").style.color = "red";
			// }

			// function mouseOut() {
			//     document.getElementById("demo").style.color = "black";

		//Vic's JS Bin example

			// title.addEventListener("click", showText);

			// function showText(){
			//   var pElem = document.createElement("p");
			//   pElem.id = "brand";
			//   pElem.innerHTML = "Where it's fun and games"
			//   document.body.appendChild(pElem);
	  
			// }

			// fire.addEventListener("click", showFame);

			// function showFame(){
			//   var divElem = document.createElement("div");
			//   divElem.id = "famous";
			//   divElem.innerHTML = "You a rockstar!";
			//   document.body.appendChild(divElem);

	// Unread emails are BOLDED; when clicked to display body, then the font returns to normal.

		// var readEmail = document.getElementsByClassName('emlSubject');
		// for (var i = 0; i<readEmail .length; i++){
		// 	readEmail [i].addEventListener('click', unBold);
		// }

		// function unBold(){
		// 	var subjectRead = this.querySelectorAll('.emlSubject')[0];
		// 	if (readEmail.style.fontWeight === 'bold'){
		// 		readEmail.style.fontWeight = 'normal';
		// 	}else{
		// 		readEmail.style.fontWeight = 'bold';
		// 	}
		// }

	// Inbox counter

		// console.log(window.geemails.length);
		// console.log(window.geemails[0]);

		// var inboxCounter = document.getElementById('counter');
		// inboxCounter.innerHTML = 'Inbox' + '(' + window.geemails.length + ')';

		function aNewMessage(){
			// console.log('is it working?');
			var inboxCounter = document.getElementById('counter');
			inboxCounter.innerHTML = 'Inbox' + ' (' + window.geemails.length++ + ')';
		}

		function createNewMessage(){

			var compileMessage  = getNewMessage();

			var newEmailBox = document.createElement('div');
			newEmailBox.className = 'emlContainer';
			document.body.appendChild(newEmailBox);

			var newSender = document.createElement('div');
			newSender.className = 'emlSender';
			newSender.innerHTML = compileMessage.sender;
			newEmailBox.appendChild(newSender);

			var newSubject = document.createElement('div');
			newSubject.className = 'emlSubject';
			newSubject.innerHTML = compileMessage.subject;
			newEmailBox.appendChild(newSubject);

			var newDate = document.createElement('div');
			newDate.className = 'emlDate';
			newDate.innerHTML = compileMessage.date;
			newEmailBox.appendChild(newDate);

			var newBody = document.createElement('div');
			newBody.className = 'emlBody';
			newBody.innerHTML = compileMessage.body;
			newBody.style.display = 'none';
			newEmailBox.appendChild(newBody);
		
			console.log(getNewMessage());

			// Big Ol' hint
				// var myNewMessage = getNewMessage();
				// console.log(myNewMessage);

				// var pElem = document.createElement('p');
				// pElem.innerHTML = createNewMessage.sender;
				// document.body.appendChild(pElem);
			var parentBox = document.getElementsByClassName('emlContainer');
			for (var i = 0; i<parentBox.length; i++){
				parentBox[i].addEventListener('click', showBody);
			}

			function showBody(){
				var bodyContent = this.querySelectorAll('.emlBody')[0];
				if (bodyContent.style.display === 'none'){
					bodyContent.style.display = 'block';
				}else{
					bodyContent.style.display = 'none';
				}
				// console.log('it works!');
			}

		}

		setInterval(aNewMessage, 3000);
		setInterval(createNewMessage, 3000);

	// Click to show new message body. This is with new var labels: 
		// var newParentBox = document.getElementsByClassName('emlSender');
		// for (var i = 0; i<newParentBox.length; i++){
		// 	newParentBox[i].addEventListener('click', newShowBody);
		// }

		// function newShowBody(){
		// 	var newBodyContent = this.querySelectorAll('.emlBody');
		// 	if (newBodyContent.style.display === 'none'){
		// 		newBodyContent.style.display = 'block';
		// 	}else{
		// 		newBodyContent.style.display = 'none';
		// 	}
		// 	// console.log('it works!');
		// }

	



 	};
 


    </script>
	</head>
	<body>
		<header id="intro">
			<h1 id="name">gee.mail</h1>
				<img id="logo" src="https://images.sftcdn.net/images/t_optimized,f_auto/p/4726ff4a-9b33-11e6-b705-00163ed833e7/1323208810/geemail-logo.png" alt="logo">
			</h1>
		</header>	
		<nav id="content">
			<ul>
				<li id="counter">Inbox</li>
				<li id="compose">Compose</li>
				<li id="sent">Sent</li>
				<li id="drafts">Drafts</li>
			</ul>
		</nav>

		<div class="container" id="main">

		</div>

		 <script src="js/mail-generator.js"></script>
	</body>
</html>